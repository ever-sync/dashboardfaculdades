version: '3.8'
services:
  dashboardfaculdades:
    build:
      context: .
      dockerfile: Dockerfile
    image: dashboardfaculdades:latest
    environment:
      NODE_ENV: production
      NEXT_TELEMETRY_DISABLED: '1'
      NEXT_PUBLIC_SUPABASE_URL: ${NEXT_PUBLIC_SUPABASE_URL}
      NEXT_PUBLIC_SUPABASE_ANON_KEY: ${NEXT_PUBLIC_SUPABASE_ANON_KEY}
      SUPABASE_SERVICE_ROLE_KEY: ${SUPABASE_SERVICE_ROLE_KEY}
      NEXT_PUBLIC_APP_URL: ${NEXT_PUBLIC_APP_URL}
      EVOLUTION_API_URL: ${EVOLUTION_API_URL}
      EVOLUTION_API_KEY: ${EVOLUTION_API_KEY}
      EVOLUTION_API_INSTANCE: ${EVOLUTION_API_INSTANCE}
      WHATSAPP_PROVIDER: ${WHATSAPP_PROVIDER}
      TWILIO_ACCOUNT_SID: ${TWILIO_ACCOUNT_SID}
      TWILIO_AUTH_TOKEN: ${TWILIO_AUTH_TOKEN}
      TWILIO_WHATSPP_FROM: ${TWILIO_WHATSPP_FROM}
      BAILEYS_API_URL: ${BAILEYS_API_URL}
      BAILEYS_API_KEY: ${BAILEYS_API_KEY}
      WHATSAPP_WEBHOOK_SECRET: ${WHATSAPP_WEBHOOK_SECRET}
      ADMIN_TOKEN: ${ADMIN_TOKEN}
    ports:
      - "${PORT:-3003}:3000"
    restart: always
    networks:               # ← ADICIONE ISSO
      - eversync           # ← Nome da sua rede

networks:                  # ← E ISSO NO FINAL
  eversync:
    external: true 